generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

/**
 * 방문 기록 (History)
 * 
 * 사용자가 방문한 웹사이트 목록 저장
 * 검색/추천 기능에 사용됨
 */
model History {
  id        String   @id @default(cuid())
  url       String
  title     String?
  favicon   String?
  visitedAt DateTime @default(now())

  @@index([visitedAt]) // 최신순 조회 최적화
}

/**
 * 북마크 (Bookmark)
 * 
 * 중요한 웹사이트 저장
 * 폴더 구조 지원
 */
model Bookmark {
  id        String   @id @default(cuid())
  url       String   @unique
  title     String?
  favicon   String?
  folder    String   @default("root") // 폴더 경로 (e.g., "Work/Project")
  createdAt DateTime @default(now())

  @@index([folder]) // 폴더별 조회 최적화
}

/**
 * 앱 설정 (Settings)
 * 
 * 키-값 스토어
 * e.g., { key: "theme", value: "dark" }
 */
model AppSetting {
  key       String   @id
  value     String
  updatedAt DateTime @updatedAt
}

/**
 * 세션 탭 (SessionTab)
 * 
 * 앱 시작 시 마지막 탭 상태 복구용
 * (MVP 단계에서는 구조만 잡아둠)
 */
model SessionTab {
  id        String   @id @default(cuid())
  url       String
  title     String?
  isActive  Boolean  @default(false)
  position  Int      @default(0)

  @@index([isActive])
}
